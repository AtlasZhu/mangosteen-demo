import{bH as L,bG as r,bZ as b,bY as x,bz as C,bB as P,bv as j,br as y,bW as M,bX as O,bu as S,bS as U,bK as A}from"./vendor-7c1d6fce.js";import{s as T}from"./pineapple-c3e4a438.js";import{s as w}from"./index-a80b2280.js";import"./vant-1401b6a8.js";const k=L({props:{nextPageUrl:{type:String,required:!0}},setup(a){const e=()=>{localStorage.setItem("skipFeatures","yes")};return()=>a.nextPageUrl!=="/items"?r("div",{class:w.actions},[r(b,{class:w.fake,to:"/items"},{default:()=>[x("跳过")]}),r(b,{to:a.nextPageUrl},{default:()=>[x("下一页")]}),r("span",{onClick:e},[r(b,{to:"/items"},{default:()=>[x("跳过")]})])]):r("div",{class:w.actions,onClick:e},[r(b,{to:"/items"},{default:()=>[x("开启应用")]})])}}),N=(a,e)=>{const l=C(),s=C(),u=C(!1),n=P(()=>{if(!(!l.value||!s.value))return{x:s.value.x-l.value.x,y:s.value.y-l.value.y}}),f=P(()=>{if(!u.value||!n.value||Math.abs(n.value.x)<24&&Math.abs(n.value.y)<24)return;const{x:t,y:_}=n.value;return Math.abs(t)>Math.abs(_)?t>0?"right":"left":_>0?"down":"up"}),i=t=>{var _,d;(_=e==null?void 0:e.beforeStart)==null||_.call(e,t),u.value=!0,l.value=s.value={x:t.touches[0].screenX,y:t.touches[0].screenY},(d=e==null?void 0:e.afterStart)==null||d.call(e,t)},m=t=>{var _,d;(_=e==null?void 0:e.beforeMove)==null||_.call(e,t),u.value&&(s.value={x:t.touches[0].screenX,y:t.touches[0].screenY},(d=e==null?void 0:e.afterMove)==null||d.call(e,t))},o=t=>{var _,d;(_=e==null?void 0:e.beforeEnd)==null||_.call(e,t),u.value=!1,(d=e==null?void 0:e.afterEnd)==null||d.call(e,t)};return j(()=>{a.value&&(a.value.addEventListener("touchstart",i),a.value.addEventListener("touchmove",m),a.value.addEventListener("touchend",o))}),y(()=>{a.value&&(a.value.removeEventListener("touchstart",i),a.value.removeEventListener("touchmove",m),a.value.removeEventListener("touchend",o))}),{swiping:u,distance:n,direction:f}},R=(a,e)=>{let l;return(...s)=>{if(!l)return l=setTimeout(()=>{l=null},e),a(...s)}},D="_wrapper_1j2tv_1",I="_slide_fade_enter_from_1j2tv_30",W="_slide_fade_leave_to_1j2tv_34",Y="_slide_fade_reverse_enter_from_1j2tv_38",B="_slide_fade_reverse_leave_to_1j2tv_42",V="_slide_fade_enter_active_1j2tv_46",X="_slide_fade_leave_active_1j2tv_47",$="_slide_fade_reverse_enter_active_1j2tv_48",q="_slide_fade_reverse_leave_active_1j2tv_49",v={wrapper:D,slide_fade_enter_from:I,slide_fade_leave_to:W,slide_fade_reverse_enter_from:Y,slide_fade_reverse_leave_to:B,slide_fade_enter_active:V,slide_fade_leave_active:X,slide_fade_reverse_enter_active:$,slide_fade_reverse_leave_active:q},c=["/welcome/1","/welcome/2","/welcome/3","/welcome/4"],g=[{enterFromClass:v.slide_fade_reverse_enter_from,enterActiveClass:v.slide_fade_reverse_enter_active,leaveToClass:v.slide_fade_reverse_leave_to,leaveActiveClass:v.slide_fade_reverse_leave_active},{enterFromClass:v.slide_fade_enter_from,enterActiveClass:v.slide_fade_enter_active,leaveToClass:v.slide_fade_leave_to,leaveActiveClass:v.slide_fade_leave_active}];let h;const E=function(a){const e=c.indexOf(a)+1;return e===c.length?"/items":c[e]},z=function(a){const e=c.indexOf(a)-1;return c[e]};let F=C("/items");const J=L({beforeRouteEnter(a){F.value=E(a.path)},beforeRouteUpdate(a,e){const l=c.indexOf(a.path),s=c.indexOf(e.path);l>-1&&s>-1&&(h=l>s?1:0),F.value=E(a.path)},setup(){const a=C(),{swiping:e,direction:l}=N(a,{beforeStart:f=>f.preventDefault()}),s=M(),u=O(),n=R(()=>{e.value&&l.value==="left"?u.push(E(s.path)):e.value&&l.value==="right"&&s.path!=="/welcome/1"&&u.push(z(s.path))},350);return S([l],n),()=>r("div",{class:v.wrapper},[r("header",null,[r("svg",null,[r("use",{"xlink:href":`#${T}`},null)]),r("h1",null,[x("菠萝账本")])]),r("main",{ref:a},[r(U,null,{default:({Component:f})=>{var i,m,o,t;return r(A,{enterFromClass:(i=g[h])==null?void 0:i.enterFromClass,enterActiveClass:(m=g[h])==null?void 0:m.enterActiveClass,leaveToClass:(o=g[h])==null?void 0:o.leaveToClass,leaveActiveClass:(t=g[h])==null?void 0:t.leaveActiveClass},{default:()=>[r(f,null,null)]})}})]),r("footer",null,[r(k,{nextPageUrl:F.value},null)])])}});export{J as Welcome,J as default};
